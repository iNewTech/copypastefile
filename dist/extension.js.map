{
  "version": 3,
  "sources": ["../src/extension.ts", "../src/commands/duplicateFile.ts", "../src/commands/copyFileContentToClipboard.ts"],
  "sourcesContent": ["import * as vscode from 'vscode';\nimport duplicateFile from './commands/duplicateFile';\nimport copyFileContentToClipboard from './commands/copyFileContentToClipboard';\n\nexport function activate(context: vscode.ExtensionContext) {\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('copypastefile.duplicateFile', duplicateFile)\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('copypastefile.duplicateFolder', duplicateFile)\n    );\n\n    context.subscriptions.push(\n        vscode.commands.registerCommand('copypastefile.copyFileContentToClipboard', copyFileContentToClipboard)\n    );\n}\n\nexport function deactivate() {}\n", "import * as vscode from 'vscode';\nimport * as path from 'path';\n\nexport default async function duplicateFile(uri: vscode.Uri) {\n    if (!uri) {\n        // Fallback for command palette usage\n        const activeEditor = vscode.window.activeTextEditor;\n        if (activeEditor) {\n            uri = activeEditor.document.uri;\n        } else {\n            vscode.window.showErrorMessage('Please select a resource to duplicate.');\n            return;\n        }\n    }\n\n    try {\n        const stat = await vscode.workspace.fs.stat(uri);\n        const isDirectory = (stat.type & vscode.FileType.Directory) !== 0;\n\n        const baseFileDir = path.dirname(uri.fsPath);\n        const baseName = path.basename(uri.fsPath);\n        \n        const newNameSuggestion = await getUniqueName(baseFileDir, baseName);\n        \n        // Smart selection: select filename but not extension (if it exists)\n        const extIndex = newNameSuggestion.lastIndexOf('.');\n        const selectionEnd = extIndex > 0 ? extIndex : newNameSuggestion.length;\n\n        const newName = await vscode.window.showInputBox({\n            prompt: `Enter name for duplicated ${isDirectory ? 'folder' : 'file'}`,\n            value: newNameSuggestion,\n            valueSelection: [0, selectionEnd]\n        });\n\n        if (!newName) {\n            return;\n        }\n\n        const newFilePath = path.join(baseFileDir, newName);\n        const newUri = vscode.Uri.file(newFilePath);\n\n        try {\n            await vscode.workspace.fs.stat(newUri);\n            vscode.window.showErrorMessage(`${isDirectory ? 'Folder' : 'File'} already exists: ${newName}`);\n            return;\n        } catch {\n            // Target does not exist, which is what we want\n        }\n\n        // Perform the copy (Recursive for folders, atomic for files)\n        await vscode.workspace.fs.copy(uri, newUri, { overwrite: false });\n\n        // Only open the file if it's a file\n        if (!isDirectory) {\n            const doc = await vscode.workspace.openTextDocument(newUri);\n            await vscode.window.showTextDocument(doc);\n        }\n\n    } catch (error: any) {\n        vscode.window.showErrorMessage(`Error duplicating resource: ${error.message}`);\n    }\n}\n\nasync function getUniqueName(dirPath: string, oldName: string): Promise<string> {\n    const ext = path.extname(oldName);\n    const nameWithoutExt = path.basename(oldName, ext);\n    let counter = 0;\n    \n    while (true) {\n        const suffix = counter === 0 ? '_copy' : `_copy_${counter}`;\n        const candidate = `${nameWithoutExt}${suffix}${ext}`;\n        const candidatePath = vscode.Uri.file(path.join(dirPath, candidate));\n        \n        try {\n            await vscode.workspace.fs.stat(candidatePath);\n            counter++;\n        } catch {\n            return candidate;\n        }\n    }\n}\n", "import * as vscode from 'vscode';\nimport * as util from 'util';\n\nfunction isBinary(content: Uint8Array): boolean {\n    // Check for null bytes in the first 1024 bytes\n    const checkLength = Math.min(content.length, 1024);\n    for (let i = 0; i < checkLength; i++) {\n        if (content[i] === 0) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport default async function copyFileContentToClipboard(uri: vscode.Uri) {\n    if (!uri) {\n        vscode.window.showErrorMessage('Please select a file first');\n        return;\n    }\n\n    try {\n        const content = await vscode.workspace.fs.readFile(uri);\n        \n        if (isBinary(content)) {\n            vscode.window.showErrorMessage('Cannot copy binary file content to clipboard.');\n            return;\n        }\n\n        const text = new TextDecoder().decode(content);\n        await vscode.env.clipboard.writeText(text);\n        vscode.window.showInformationMessage('File content copied to clipboard.');\n    } catch (error: any) {\n        vscode.window.showErrorMessage(`Error: ${error.message}`);\n    }\n}\n"],
  "mappings": "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",
  "names": ["vscode", "vscode"]
}
